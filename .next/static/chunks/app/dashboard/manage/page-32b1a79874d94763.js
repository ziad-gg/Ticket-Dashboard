(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95],{58708:function(e,l,t){Promise.resolve().then(t.bind(t,32059))},32059:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return x}});var n=t(57437),a=t(2265),i=t(18205),s=t(32697);let o=(0,a.lazy)(()=>Promise.all([t.e(983),t.e(657)]).then(t.bind(t,70336))),r=(0,a.lazy)(()=>Promise.all([t.e(983),t.e(231)]).then(t.bind(t,8231))),d=(0,a.lazy)(()=>t.e(437).then(t.bind(t,97437))),c={display:"flex",color:"white",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",bottom:"0",left:"0",right:"0",background:"rgba(0, 0, 0, 0.5)"};function u(e){let[l,t]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),[h,p]=(0,a.useState)(e.data.disabled),v=()=>{m(!1)};return(0,a.useEffect)(()=>{fetch(s.Z.api("panals/get/".concat(e.id)),{}).then(e=>e.json()).then(e=>{p(e.disabled)})},[h]),(0,n.jsxs)("div",{id:e.id,className:"w-full h-20 bg-main flex items-center rounded-lg group justify-between",children:[(0,n.jsxs)("div",{className:"flex justify-center items-center p-5",children:[(0,n.jsx)("span",{className:"w-[269px]",children:(0,n.jsx)("span",{className:" opacity-50 text-lg font-bold ",children:e.name})}),(0,n.jsx)(o,{color:"warning",sx:{marginLeft:16},className:"ms-3 un",children:"Hover to view more"})]}),(0,n.jsxs)("div",{className:"me-3",children:[(0,n.jsx)(r,{sx:{marginRight:3},color:"primary",className:"w-16",onClick:()=>t(!0),children:"Edit"}),(0,n.jsx)(r,{sx:{marginRight:3},color:"danger",onClick:()=>{m(!0)},children:"delete"}),(0,n.jsx)(r,{id:"statusButton",color:h?"warning":"success",onClick:()=>{h?fetch(s.Z.api("panals/enable/".concat(e.id)),{method:"POST"}).then(()=>{p(!1)}):fetch(s.Z.api("panals/disable/".concat(e.id)),{method:"POST"}).then(()=>{p(!0)})},children:h?"Enable":"Disable"})]}),l&&(0,n.jsx)(i.default,{open:l,setOpen:t,data:e.data,refresh:e.refresh}),(0,n.jsx)(d,{open:u,onClose:v,children:(0,n.jsx)("div",{className:"delete-modal",style:c,children:(0,n.jsxs)("div",{className:"modal-content",children:[(0,n.jsx)(o,{className:"pb-5  font-bold text-3xl",color:"danger",children:"Confirm Deletion"}),(0,n.jsx)(o,{className:"pb-5  font-bold text-lg",children:"Are you sure you want to delete?"}),(0,n.jsx)(r,{variant:"outlined",color:"danger",onClick:()=>{let l=document.getElementById(e.id);l&&(fetch(s.Z.api("panals/".concat(e.id)),{cache:"no-store",method:"delete"}),m(!1),l.remove())},className:"me-5",style:{marginRight:20},children:"Confirm"}),(0,n.jsx)(r,{variant:"outlined",onClick:v,className:"ms-5",children:"Cancel"})]})})})]})}var m=t(69427);let h=(0,a.lazy)(()=>Promise.all([t.e(983),t.e(254)]).then(t.bind(t,90729))),p=(0,a.lazy)(()=>Promise.all([t.e(983),t.e(231)]).then(t.bind(t,8231))),v=(0,a.lazy)(()=>Promise.resolve().then(t.bind(t,18205)));function x(){let e=(0,m.w)(),[l,t]=(0,a.useState)(!1),[i,o]=(0,a.useState)([]),[r,d]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{fetch(s.Z.api("panals/metadata"),{headers:{"Content-Type":"application/json","Cache-Control":"no-store"},cache:"no-store",next:{revalidate:0}}).then(e=>e.json()).then(e=>{o(e)})},[r]),(0,n.jsxs)("div",{className:"bg-black w-full h-full text-white p-12 overflow-y-scroll",children:[(0,n.jsxs)("div",{className:"flex justify-between px-10 relative",children:[(0,n.jsx)("div",{className:"absolute w-[calc(100%-3.7%)] h-1 bg-main -bottom-2"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"Panals"}),(0,n.jsx)("p",{className:"opacity-70",children:"To manage ticket panals"})]}),(0,n.jsx)(h,{defaultChecked:!1,disabled:!0})]}),(0,n.jsxs)("div",{className:"px-10 pt-10 flex flex-col gap-10 ",children:[(0,n.jsxs)("div",{className:"w-full h-20 bg-main flex items-center rounded-lg group justify-between",children:[(0,n.jsxs)("div",{className:"flex justify-center items-center gap-6 ps-5 h-full",children:[(0,n.jsx)("div",{className:"h-16 w-16 text-center flex justify-center items-center text-6xl bg-[#686161] rounded-full ",children:"+"}),(0,n.jsx)("div",{className:"opacity-60 hover:opacity-100",children:"You can add a new Panal by clicking the create button"})]}),(0,n.jsx)("div",{className:"pe-8",children:(0,n.jsx)(p,{disabled:!1,variant:"solid",color:"success",className:"bg-green-700",onClick:()=>t(!0),children:"Create"})})]}),i.map(async l=>{var t,a;let i=l=>{var t;return null===(t=e.statics)||void 0===t?void 0:t.server.channels.find(e=>e.id===l)},s=l=>null==l?void 0:l.map(l=>{var t;return null===(t=e.statics)||void 0===t?void 0:t.server.roles.find(e=>e.id===l)}),o=(e,l)=>"channel"===l?(null==e?void 0:e.id)?{label:"#".concat(null==e?void 0:e.name),id:null==e?void 0:e.id}:{label:"",id:""}:"role"===l?(null==e?void 0:e.map(e=>({label:e.name,id:e.id})))||[]:void 0,r=(t=l.category,null===(a=e.statics)||void 0===a?void 0:a.server.categories.find(e=>e.id===t)),c=i(l.closeChannelLogMenu),m=i(l.deleteLogChannelMenu),h=i(l.openLogChannelMenu),p=i(l.claimLogChannelMenu),v=s(l.allowedRoles),x=s(l.blackListRoles),b=s(l.supportRoles),g={id:l.id,name:l.name,description:l.description,limit:l.limit,category:o(r,"channel"),blackListRoles:o(x,"role"),allowedRoles:o(v,"role"),supportRoles:o(b,"role"),closeChannelLogMenu:o(c,"channel"),openLogChannelMenu:o(h,"channel"),claimLogChannelMenu:o(p,"channel"),deleteLogChannelMenu:o(m,"channel"),claimButton:l.claimButton,addAllBots:l.addAllBots,oneStepClose:l.oneStepClose};return(0,n.jsx)(u,{name:l.name,id:l.id,data:g,refresh:()=>d(e=>!e)},l.id)})]}),(0,n.jsx)(v,{open:l,setOpen:t,refresh:()=>d(e=>!e)})]})}},18205:function(e,l,t){"use strict";t.r(l);var n=t(57437),a=t(69427),i=t(2265),s=t(32697),o=t(89120),r=t(39350),d=t(72261),c=t(35551),u=t(21975),m=t(27835),h=t(81679),p=t(51872),v=t(34084);l.default=e=>{var l,t,x;let{open:b,setOpen:g,data:f,refresh:j}=e,C=(0,a.w)(),y=null===(l=C.statics)||void 0===l?void 0:l.server.roles.map(e=>({label:"@".concat(e.name.startsWith("@")?e.name.slice(1):e.name),id:e.id})),N=null===(t=C.statics)||void 0===t?void 0:t.server.channels.map(e=>({label:"#".concat(e.name),id:e.id})),w=null===(x=C.statics)||void 0===x?void 0:x.server.categories.map(e=>({label:"#".concat(e.name),id:e.id})),k=y.find(e=>"@everyone"===e.label),[S,Z]=(0,i.useState)(""),[L,B]=(0,i.useState)(!1),[R,M]=(0,i.useState)(!1),[P,I]=(0,i.useState)((null==f?void 0:f.name)||""),[E,O]=(0,i.useState)((null==f?void 0:f.description)||""),[T,A]=(0,i.useState)((null==f?void 0:f.category)||{label:"",id:""}),[z,D]=(0,i.useState)((null==f?void 0:f.limit)||1),[_,W]=(0,i.useState)((null==f?void 0:f.blackListRoles)||[]),[q,U]=(0,i.useState)((null==f?void 0:f.allowedRoles)||[y.find(e=>"@everyone"===e.label)||y[0]]),[H,F]=(0,i.useState)((null==f?void 0:f.supportRoles)||[]),[J,V]=(0,i.useState)((null==f?void 0:f.closeChannelLogMenu)||{label:"",id:""}),[Y,G]=(0,i.useState)((null==f?void 0:f.openLogChannelMenu)||{label:"",id:""}),[K,Q]=(0,i.useState)((null==f?void 0:f.claimLogChannelMenu)||{label:"",id:""}),[X,$]=(0,i.useState)((null==f?void 0:f.deleteLogChannelMenu)||{label:"",id:""}),[ee,el]=(0,i.useState)(!1),[et,en]=(0,i.useState)(!1),[ea,ei]=(0,i.useState)((null==f?void 0:f.claimButton)||!0),[es,eo]=(0,i.useState)((null==f?void 0:f.addAllBots)||!1),[er,ed]=(0,i.useState)((null==f?void 0:f.oneStepClose)||!1),ec=()=>{g(!1)};(0,i.useEffect)(()=>{en(!0)},[]);let eu=()=>{Z(""),B(!1),I(""),O(""),A({label:"",id:""}),D(5),W([]),U([y.find(e=>"@everyone"===e.label)||y[0]]),F([]),V({label:"",id:""}),G({label:"",id:""}),$({label:"",id:""}),Q({label:"",id:""}),ei(!0),eo(!1),M(!1),ed(!1)},em=(e,l)=>{var t,n;!(k&&l.find(e=>e.id===k.id))&&(W(l),(null==l?void 0:null===(t=l[0])||void 0===t?void 0:t.id)&&el(!0),(null==l?void 0:null===(n=l[0])||void 0===n?void 0:n.id)||el(!1))},eh=(e,l)=>{if(k&&l.find(e=>e.id===k.id))U([k]),W([]),en(!0);else{var t,n;el(!1),U(l),(null==l?void 0:null===(t=l[0])||void 0===t?void 0:t.id)&&en(!0),(null==l?void 0:null===(n=l[0])||void 0===n?void 0:n.id)||en(!1)}};return(0,n.jsxs)("div",{children:[(0,n.jsx)(o.Z,{open:b,onClose:ec,closeAfterTransition:!0,className:!b&&"hidden"||"",BackdropComponent:r.Z,BackdropProps:{timeout:500},children:(0,n.jsx)(d.Z,{in:b,children:(0,n.jsx)("div",{className:"fixed inset-0 flex justify-center items-center backdrop-blur-md bg-opacity-25",children:(0,n.jsxs)("div",{className:"bg-white p-8 shadow-lg opacity-100 w-[80%] h-[90%] rounded-xl overflow-auto",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h2",{className:"text-2xl font-semibold",style:{marginBottom:"1rem"},children:"Create Panal"}),(0,n.jsx)(c.Z,{onClick:ec,children:"Close"})]}),S&&(0,n.jsx)("p",{className:"text-red-500 mb-3",children:S}),(0,n.jsx)(u.Z,{label:"Name",value:P,onChange:e=>I(e.target.value),fullWidth:!0,variant:"outlined",style:{marginBottom:"1rem"}}),(0,n.jsx)(u.Z,{label:"Description",value:E,onChange:e=>O(e.target.value),fullWidth:!0,variant:"outlined",multiline:!0,rows:4,style:{marginBottom:"1rem"}}),(0,n.jsx)(u.Z,{label:"Tickets Limit per user",defaultValue:z,fullWidth:!0,onChange:e=>D(Number(e.target.value)),variant:"outlined",type:"number",InputProps:{startAdornment:(0,n.jsx)(h.Z,{position:"start",children:"Limit"}),inputProps:{min:1,max:10}},style:{marginBottom:"1rem"}}),(0,n.jsx)(m.Z,{placeholder:"Category",value:T,options:w,onChange:(e,l)=>A(l),renderInput:e=>(0,n.jsx)(u.Z,{...e,label:"Category",variant:"outlined",style:{marginBottom:"1rem"}})}),(0,n.jsx)(m.Z,{multiple:!0,placeholder:"Allowed Roles",value:q,options:y,onChange:(e,l)=>eh(void 0,l),disabled:ee,renderInput:e=>(0,n.jsx)(u.Z,{...e,label:"Allowed Roles",variant:"outlined",style:{marginBottom:"1rem"}})}),(0,n.jsx)(m.Z,{multiple:!0,placeholder:"Black List Roles",value:_,options:y,onChange:(e,l)=>em(void 0,l),disabled:et,renderInput:e=>(0,n.jsx)(u.Z,{...e,label:"Black List Roles",variant:"outlined",style:{marginBottom:"1rem"}})}),(0,n.jsx)(m.Z,{multiple:!0,placeholder:"Support Roles",value:H,options:y,onChange:(e,l)=>F(l),renderInput:e=>(0,n.jsx)(u.Z,{...e,label:"Support Roles",variant:"outlined",style:{marginBottom:"1rem"}})}),(0,n.jsx)(m.Z,{multiple:!1,options:N,value:Y,onChange:(e,l)=>G(l),renderInput:e=>(0,n.jsx)(u.Z,{...e,label:"Open Log Channel Menu",variant:"outlined",style:{marginBottom:"1rem"}})}),(0,n.jsx)(m.Z,{multiple:!1,options:N,value:J,onChange:(e,l)=>V(l),renderInput:e=>(0,n.jsx)(u.Z,{...e,label:"Close Log Channel Menu",variant:"outlined",style:{marginBottom:"1rem"}})}),(0,n.jsx)(m.Z,{multiple:!1,options:N,value:K,onChange:(e,l)=>Q(l),renderInput:e=>(0,n.jsx)(u.Z,{...e,label:"Claim Log Channel Menu",variant:"outlined",style:{marginBottom:"1rem"}})}),(0,n.jsx)(m.Z,{multiple:!1,options:N,value:X,onChange:(e,l)=>$(l),renderInput:e=>(0,n.jsx)(u.Z,{...e,label:"Delete Log Channel Menu",variant:"outlined",style:{marginBottom:"1rem"}})}),(0,n.jsxs)("div",{className:"mb-4 flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:ea,onChange:e=>ei(e.target.checked)}),(0,n.jsx)("label",{className:"ml-2",children:"Claim Button"})]}),(0,n.jsxs)("div",{className:"mb-4 flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:es,onChange:e=>eo(e.target.checked)}),(0,n.jsx)("label",{className:"ml-2",children:"Add all bots to ticket"})]}),(0,n.jsxs)("div",{className:"mb-4 flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:er,onChange:e=>ed(e.target.checked)}),(0,n.jsx)("label",{className:"ml-2",children:"One Step Close"})]}),(0,n.jsx)(c.Z,{type:"button",variant:"contained",disabled:R,color:(null==f?void 0:f.id)?"success":"primary",onClick:()=>{var e;let l=(0,p.Z)();if(!P)return Z("Name is required");if(P.length<3)return Z("Name must be at least 3 characters");if(P.length>100)return Z("Name cannot exceed 100 words");if(!E)return Z("description is required");if(E.length<3)return Z("Description must be at least 3 characters");if(E.length>100)return Z("Description cannot exceed 100 words");if(!T)return Z("Category is required");if(!q[0]&&!_[0])return Z("Please select at least one blacklisted role or allowed role");Z("");let t={id:null!==(e=null==f?void 0:f.id)&&void 0!==e?e:l,name:P,limit:z,description:E,category:T,allowedRoles:q,blackListRoles:_,supportRoles:H,openLogChannelMenu:Y,closeChannelLogMenu:J,claimLogChannelMenu:K,deleteLogChannelMenu:X,claimButton:ea,addAllBots:es,oneStepClose:er};M(!0),fetch(s.Z.api("panals/new"),{method:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-store"},cache:"no-store",next:{revalidate:0},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{(null==e?void 0:e.error)?Z(e.message):(g(!1),B(!0),M(!0),setTimeout(()=>{B(!1)},2e3),j&&j()),eu()}).catch(()=>{Z("error")})},style:{marginTop:"1rem"},children:(null==f?void 0:f.id)?"Edit":"Submit"})]})})},null==f?void 0:f.id)}),(0,n.jsx)(v.Z,{open:L,autoHideDuration:3e3,onClose:()=>B(!1),message:"Form submitted successfully",className:"z-50"})]})}},69427:function(e,l,t){"use strict";t.d(l,{w:function(){return i}});var n=t(2265);let a=(0,n.createContext)({}),i=()=>(0,n.useContext)(a);l.Z=a},32697:function(e,l){"use strict";let t={apiURL:"http://localhost:8008",api:e=>{if("string"!=typeof e)return t.apiURL;{let l=t.apiURL.concat("/api","/",e);return l}}};l.Z=t}},function(e){e.O(0,[990,405,274,563,120,84,226,292,662,971,596,744],function(){return e(e.s=58708)}),_N_E=e.O()}]);